{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=\"http://localhost:7020\";export default function AddEmployee(_ref){let{loadData}=_ref;const[employees,setEmployees]=useState([]);const[loading,setLoading]=useState(false);// Form state\nconst[name,setName]=useState(\"\");const[quota,setQuota]=useState(\"\");// Fetch all employees\nconst fetchEmployees=async()=>{setLoading(true);try{const res=await fetch(\"\".concat(API_URL,\"/api/employees\"));const data=await res.json();setEmployees(data||[]);}catch(err){console.error(\"Error loading employees:\",err);setEmployees([]);}setLoading(false);};useEffect(()=>{fetchEmployees();},[]);// Add new employee\nconst handleAdd=async e=>{e.preventDefault();if(!name.trim())return alert(\"Συμπλήρωσε το όνομα του εργαζόμενου!\");try{await fetch(\"\".concat(API_URL,\"/api/add-employee\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:Date.now().toString(),name:name.trim(),year:new Date().getFullYear(),days:quota?Number(quota):null})});setName(\"\");setQuota(\"\");fetchEmployees();if(loadData)loadData();alert(\"Ο εργαζόμενος προστέθηκε!\");}catch(err){console.error(\"Add employee error:\",err);alert(\"Σφάλμα κατά την προσθήκη του εργαζόμενου!\");}};// Delete employee\nconst handleDelete=async(id,name)=>{if(!window.confirm(\"\\u0398\\u03AD\\u03BB\\u03B5\\u03C4\\u03B5 \\u03BD\\u03B1 \\u03B4\\u03B9\\u03B1\\u03B3\\u03C1\\u03B1\\u03C6\\u03B5\\u03AF \\u03BF \\u03B5\\u03C1\\u03B3\\u03B1\\u03B6\\u03CC\\u03BC\\u03B5\\u03BD\\u03BF\\u03C2 \\\"\".concat(name,\"\\\" ;\")))return;try{await fetch(\"\".concat(API_URL,\"/api/delete-employee/\").concat(id),{method:\"DELETE\"});fetchEmployees();if(loadData)loadData();}catch(err){console.error(\"Delete employee error:\",err);alert(\"Σφάλμα κατά τη διαγραφή του εργαζόμενου!\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"\\u03A0\\u03C1\\u03BF\\u03C3\\u03B8\\u03AE\\u03BA\\u03B7 \\u039D\\u03AD\\u03BF\\u03C5 \\u0395\\u03C1\\u03B3\\u03B1\\u03B6\\u03CC\\u03BC\\u03B5\\u03BD\\u03BF\\u03C5\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAdd,className:\"flex flex-col gap-3 max-w-md mb-6\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:name,onChange:e=>setName(e.target.value),placeholder:\"\\u038C\\u03BD\\u03BF\\u03BC\\u03B1 \\u03B5\\u03C1\\u03B3\\u03B1\\u03B6\\u03CC\\u03BC\\u03B5\\u03BD\\u03BF\\u03C5\",className:\"border p-2 rounded\"}),/*#__PURE__*/_jsx(\"input\",{name:\"quota\",type:\"number\",value:quota,onChange:e=>setQuota(e.target.value),placeholder:\"\\u03A3\\u03CD\\u03BD\\u03BF\\u03BB\\u03BF \\u03B4\\u03B9\\u03BA\\u03B1\\u03B9\\u03BF\\u03CD\\u03BC\\u03B5\\u03BD\\u03C9\\u03BD \\u03B7\\u03BC\\u03B5\\u03C1\\u03CE\\u03BD (\\u03C0\\u03C1\\u03BF\\u03B1\\u03B9\\u03C1\\u03B5\\u03C4\\u03B9\\u03BA\\u03CC)\",className:\"border p-2 rounded\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:\"\\u03A0\\u03C1\\u03BF\\u03C3\\u03B8\\u03AE\\u03BA\\u03B7\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"\\u039B\\u03AF\\u03C3\\u03C4\\u03B1 \\u038C\\u03BB\\u03C9\\u03BD \\u03C4\\u03C9\\u03BD \\u0395\\u03C1\\u03B3\\u03B1\\u03B6\\u03BF\\u03BC\\u03AD\\u03BD\\u03C9\\u03BD\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"\\u03A6\\u03CC\\u03C1\\u03C4\\u03C9\\u03C3\\u03B7...\"}):employees.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u0394\\u03B5\\u03BD \\u03C5\\u03C0\\u03AC\\u03C1\\u03C7\\u03BF\\u03C5\\u03BD \\u03B5\\u03C1\\u03B3\\u03B1\\u03B6\\u03CC\\u03BC\\u03B5\\u03BD\\u03BF\\u03B9.\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto border-collapse border w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"border p-2\",children:\"\\u038C\\u03BD\\u03BF\\u03BC\\u03B1\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border p-2 text-center\",children:\"\\u0395\\u03BD\\u03AD\\u03C1\\u03B3\\u03B5\\u03B9\\u03B5\\u03C2\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:employees.map(emp=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border p-2\",children:emp.name}),/*#__PURE__*/_jsx(\"td\",{className:\"border p-2 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(emp.id,emp.name),className:\"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600\",children:\"\\u274C\"})})]},emp.id))})]})]});}","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","API_URL","AddEmployee","_ref","loadData","employees","setEmployees","loading","setLoading","name","setName","quota","setQuota","fetchEmployees","res","fetch","concat","data","json","err","console","error","handleAdd","e","preventDefault","trim","alert","method","headers","body","JSON","stringify","id","Date","now","toString","year","getFullYear","days","Number","handleDelete","window","confirm","className","children","onSubmit","value","onChange","target","placeholder","type","length","map","emp","onClick"],"sources":["D:/projects/ΑΔΕΙΕΣ/server/client/src/AddEmployee.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst API_URL = \"http://localhost:7020\";\r\n\r\nexport default function AddEmployee({ loadData }) {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Form state\r\n  const [name, setName] = useState(\"\");\r\n  const [quota, setQuota] = useState(\"\");\r\n\r\n  // Fetch all employees\r\n  const fetchEmployees = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/employees`);\r\n      const data = await res.json();\r\n      setEmployees(data || []);\r\n    } catch (err) {\r\n      console.error(\"Error loading employees:\", err);\r\n      setEmployees([]);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEmployees();\r\n  }, []);\r\n\r\n  // Add new employee\r\n  const handleAdd = async (e) => {\r\n    e.preventDefault();\r\n    if (!name.trim()) return alert(\"Συμπλήρωσε το όνομα του εργαζόμενου!\");\r\n\r\n    try {\r\n      await fetch(`${API_URL}/api/add-employee`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          id: Date.now().toString(),\r\n          name: name.trim(),\r\n          year: new Date().getFullYear(),\r\n          days: quota ? Number(quota) : null,\r\n        }),\r\n      });\r\n\r\n      setName(\"\");\r\n      setQuota(\"\");\r\n      fetchEmployees();\r\n      if (loadData) loadData();\r\n      alert(\"Ο εργαζόμενος προστέθηκε!\");\r\n    } catch (err) {\r\n      console.error(\"Add employee error:\", err);\r\n      alert(\"Σφάλμα κατά την προσθήκη του εργαζόμενου!\");\r\n    }\r\n  };\r\n\r\n  // Delete employee\r\n  const handleDelete = async (id, name) => {\r\n    if (!window.confirm(`Θέλετε να διαγραφεί ο εργαζόμενος \"${name}\" ;`)) return;\r\n\r\n    try {\r\n      await fetch(`${API_URL}/api/delete-employee/${id}`, { method: \"DELETE\" });\r\n      fetchEmployees();\r\n      if (loadData) loadData();\r\n    } catch (err) {\r\n      console.error(\"Delete employee error:\", err);\r\n      alert(\"Σφάλμα κατά τη διαγραφή του εργαζόμενου!\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4\">\r\n      {/* Add Employee Form */}\r\n      <h2 className=\"text-xl font-bold mb-4\">Προσθήκη Νέου Εργαζόμενου</h2>\r\n      <form onSubmit={handleAdd} className=\"flex flex-col gap-3 max-w-md mb-6\">\r\n        <input\r\n          name=\"name\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          placeholder=\"Όνομα εργαζόμενου\"\r\n          className=\"border p-2 rounded\"\r\n        />\r\n        <input\r\n          name=\"quota\"\r\n          type=\"number\"\r\n          value={quota}\r\n          onChange={(e) => setQuota(e.target.value)}\r\n          placeholder=\"Σύνολο δικαιούμενων ημερών (προαιρετικό)\"\r\n          className=\"border p-2 rounded\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\r\n        >\r\n          Προσθήκη\r\n        </button>\r\n      </form>\r\n\r\n      {/* Employee List */}\r\n      <h2 className=\"text-xl font-bold mb-4\">Λίστα Όλων των Εργαζομένων</h2>\r\n      {loading ? (\r\n        <p>Φόρτωση...</p>\r\n      ) : employees.length === 0 ? (\r\n        <p>Δεν υπάρχουν εργαζόμενοι.</p>\r\n      ) : (\r\n        <table className=\"table-auto border-collapse border w-full\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"border p-2\">Όνομα</th>\r\n              <th className=\"border p-2 text-center\">Ενέργειες</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {employees.map((emp) => (\r\n              <tr key={emp.id}>\r\n                <td className=\"border p-2\">{emp.name}</td>\r\n                <td className=\"border p-2 text-center\">\r\n                  <button\r\n                    onClick={() => handleDelete(emp.id, emp.name)}\r\n                    className=\"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600\"\r\n                  >\r\n                    ❌\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}