{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Routes,Route,Link}from\"react-router-dom\";import EmployeeList from\"./EmployeeList\";// dashboard page\nimport AddEmployee from\"./AddEmployee\";// add employee form\nimport EditEmployee from\"./EditEmployee\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[employees,setEmployees]=useState([]);const[leaves,setLeaves]=useState([]);const[year,setYear]=useState(new Date().getFullYear());// -------------------- Load Data --------------------\nconst loadData=async()=>{try{const res=await fetch(\"/api/data?year=\".concat(year));const json=await res.json();setEmployees(json.employees||[]);setLeaves(json.leaves||[]);}catch(err){console.error(\"Load data error:\",err);}};// -------------------- Delete Leave --------------------\nconst handleDeleteLeave=async id=>{if(!window.confirm(\"Σίγουρα θέλεις να διαγράψεις αυτήν την άδεια;\"))return;try{await fetch(\"/api/delete-leave/\".concat(id),{method:\"DELETE\"});loadData();}catch(err){console.error(\"Delete leave error:\",err);}};// -------------------- Edit Leave --------------------\nconst handleEditLeave=async leave=>{const from=prompt(\"Νέα ημερομηνία έναρξης (YYYY-MM-DD):\",leave.from);const to=prompt(\"Νέα ημερομηνία λήξης (YYYY-MM-DD):\",leave.to);if(!from||!to)return;const days=Math.floor((new Date(to)-new Date(from))/(1000*60*60*24))+1;try{await fetch(\"/api/update-leave\",{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:leave.id,from,to,days})});loadData();}catch(err){console.error(\"Update leave error:\",err);}};// -------------------- Add Leave --------------------\nconst addLeave=async e=>{e.preventDefault();const form=e.target;const employeeId=form.employee.value;const from=form.from.value;const to=form.to.value;const days=Math.floor((new Date(to)-new Date(from))/(1000*60*60*24))+1;try{await fetch(\"/api/add-leave\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:Date.now().toString(),employeeId,from,to,days})});form.reset();loadData();}catch(err){console.error(\"Add leave error:\",err);}};// -------------------- Export --------------------\nconst doExport=()=>{window.open(\"/api/export?year=\".concat(year),\"_blank\");};// -------------------- Effect --------------------\nuseEffect(()=>{loadData();},[year]);// -------------------- Render --------------------\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/STIRIXIS.png\",alt:\"STIRIXIS Logo\",className:\"h-16 w-auto cursor-pointer\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-4 mb-6\",children:[/*#__PURE__*/_jsx(Link,{to:\"/add\",className:\"btn btn-blue\",children:\"\\u03A0\\u03C1\\u03BF\\u03C3\\u03B8\\u03AE\\u03BA\\u03B7 \\u039D\\u03AD\\u03BF\\u03C5 \\u0395\\u03C1\\u03B3\\u03B1\\u03B6\\u03BF\\u03BC\\u03AD\\u03BD\\u03BF\\u03C5\"}),/*#__PURE__*/_jsx(Link,{to:\"/edit\",className:\"btn btn-yellow\",children:\"\\u0395\\u03C0\\u03B5\\u03BE\\u03B5\\u03C1\\u03B3\\u03B1\\u03C3\\u03AF\\u03B1 \\u0395\\u03C1\\u03B3\\u03B1\\u03B6\\u03BF\\u03BC\\u03AD\\u03BD\\u03BF\\u03C5\"})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(EmployeeList,{employees:employees,leaves:leaves,year:year,setYear:setYear,addLeave:addLeave,loadData:loadData,doExport:doExport,handleEditLeave:handleEditLeave,handleDeleteLeave:handleDeleteLeave})}),/*#__PURE__*/_jsx(Route,{path:\"/add\",element:/*#__PURE__*/_jsx(AddEmployee,{loadData:loadData})}),/*#__PURE__*/_jsx(Route,{path:\"/edit\",element:/*#__PURE__*/_jsx(EditEmployee,{loadData:loadData})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Routes","Route","Link","EmployeeList","AddEmployee","EditEmployee","jsx","_jsx","jsxs","_jsxs","App","employees","setEmployees","leaves","setLeaves","year","setYear","Date","getFullYear","loadData","res","fetch","concat","json","err","console","error","handleDeleteLeave","id","window","confirm","method","handleEditLeave","leave","from","prompt","to","days","Math","floor","headers","body","JSON","stringify","addLeave","e","preventDefault","form","target","employeeId","employee","value","now","toString","reset","doExport","open","className","children","src","alt","path","element"],"sources":["D:/projects/ΑΔΕΙΕΣ/server/client/src/App.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Routes, Route, Link } from \"react-router-dom\";\r\nimport EmployeeList from \"./EmployeeList\"; // dashboard page\r\nimport AddEmployee from \"./AddEmployee\";   // add employee form\r\nimport EditEmployee from \"./EditEmployee\";\r\n\r\nexport default function App() {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [leaves, setLeaves] = useState([]);\r\n  const [year, setYear] = useState(new Date().getFullYear());\r\n\r\n  // -------------------- Load Data --------------------\r\n  const loadData = async () => {\r\n    try {\r\n      const res = await fetch(`/api/data?year=${year}`);\r\n      const json = await res.json();\r\n      setEmployees(json.employees || []);\r\n      setLeaves(json.leaves || []);\r\n    } catch (err) {\r\n      console.error(\"Load data error:\", err);\r\n    }\r\n  };\r\n\r\n  // -------------------- Delete Leave --------------------\r\n  const handleDeleteLeave = async (id) => {\r\n    if (!window.confirm(\"Σίγουρα θέλεις να διαγράψεις αυτήν την άδεια;\")) return;\r\n    try {\r\n      await fetch(`/api/delete-leave/${id}`, { method: \"DELETE\" });\r\n      loadData();\r\n    } catch (err) {\r\n      console.error(\"Delete leave error:\", err);\r\n    }\r\n  };\r\n\r\n  // -------------------- Edit Leave --------------------\r\n  const handleEditLeave = async (leave) => {\r\n    const from = prompt(\"Νέα ημερομηνία έναρξης (YYYY-MM-DD):\", leave.from);\r\n    const to = prompt(\"Νέα ημερομηνία λήξης (YYYY-MM-DD):\", leave.to);\r\n    if (!from || !to) return;\r\n\r\n    const days = Math.floor((new Date(to) - new Date(from)) / (1000 * 60 * 60 * 24)) + 1;\r\n\r\n    try {\r\n      await fetch(`/api/update-leave`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ id: leave.id, from, to, days }),\r\n      });\r\n      loadData();\r\n    } catch (err) {\r\n      console.error(\"Update leave error:\", err);\r\n    }\r\n  };\r\n\r\n  // -------------------- Add Leave --------------------\r\n  const addLeave = async (e) => {\r\n    e.preventDefault();\r\n    const form = e.target;\r\n    const employeeId = form.employee.value;\r\n    const from = form.from.value;\r\n    const to = form.to.value;\r\n    const days = Math.floor((new Date(to) - new Date(from)) / (1000 * 60 * 60 * 24)) + 1;\r\n\r\n    try {\r\n      await fetch(`/api/add-leave`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ id: Date.now().toString(), employeeId, from, to, days }),\r\n      });\r\n      form.reset();\r\n      loadData();\r\n    } catch (err) {\r\n      console.error(\"Add leave error:\", err);\r\n    }\r\n  };\r\n\r\n  // -------------------- Export --------------------\r\n  const doExport = () => {\r\n    window.open(`/api/export?year=${year}`, \"_blank\");\r\n  };\r\n\r\n  // -------------------- Effect --------------------\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [year]);\r\n\r\n  // -------------------- Render --------------------\r\n  return (\r\n    <div className=\"container mx-auto p-4\">\r\n      {/* Logo */}\r\n      <div className=\"flex justify-center mb-6\">\r\n        <Link to=\"/\">\r\n          <img src=\"/STIRIXIS.png\" alt=\"STIRIXIS Logo\" className=\"h-16 w-auto cursor-pointer\" />\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <div className=\"flex justify-center gap-4 mb-6\">\r\n        <Link to=\"/add\" className=\"btn btn-blue\">\r\n          Προσθήκη Νέου Εργαζομένου\r\n        </Link>\r\n        <Link to=\"/edit\" className=\"btn btn-yellow\">\r\n          Επεξεργασία Εργαζομένου\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Routes */}\r\n      <Routes>\r\n        <Route\r\n          path=\"/\"\r\n          element={\r\n            <EmployeeList\r\n              employees={employees}\r\n              leaves={leaves}\r\n              year={year}\r\n              setYear={setYear}\r\n              addLeave={addLeave}\r\n              loadData={loadData}\r\n              doExport={doExport}\r\n              handleEditLeave={handleEditLeave}\r\n              handleDeleteLeave={handleDeleteLeave}\r\n            />\r\n          }\r\n        />\r\n        <Route path=\"/add\" element={<AddEmployee loadData={loadData} />} />\r\n        <Route path=\"/edit\" element={<EditEmployee loadData={loadData} />} />\r\n      </Routes>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}