{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Routes,Route,Link}from\"react-router-dom\";import EmployeeList from\"./EmployeeList\";// dashboard page\nimport AddEmployee from\"./AddEmployee\";// add employee form\nimport EditEmployee from\"./EditEmployee\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=\"http://0.0.0.0:7020\";export default function App(){const[employees,setEmployees]=useState([]);const[leaves,setLeaves]=useState([]);const[year,setYear]=useState(new Date().getFullYear());// Load employees and leaves for selected year\nconst loadData=async()=>{try{const res=await fetch(\"\".concat(API_URL,\"/api/data?year=\").concat(year));const json=await res.json();setEmployees(json.employees||[]);setLeaves(json.leaves||[]);}catch(err){console.error(\"Load data error:\",err);}};// Delete leave\nconst handleDeleteLeave=async id=>{if(!window.confirm(\"Σίγουρα θέλεις να διαγράψεις αυτήν την άδεια;\"))return;try{await fetch(\"\".concat(API_URL,\"/api/delete-leave/\").concat(id),{method:\"DELETE\"});loadData();}catch(err){console.error(\"Delete leave error:\",err);}};// Edit leave (απλό prompt για τώρα, μπορείς να κάνεις modal αργότερα)\nconst handleEditLeave=async leave=>{const from=prompt(\"Νέα ημερομηνία έναρξης (YYYY-MM-DD):\",leave.from);const to=prompt(\"Νέα ημερομηνία λήξης (YYYY-MM-DD):\",leave.to);if(!from||!to)return;const days=Math.floor((new Date(to)-new Date(from))/(1000*60*60*24))+1;try{await fetch(\"\".concat(API_URL,\"/api/update-leave\"),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:leave.id,from,to,days})});loadData();}catch(err){console.error(\"Update leave error:\",err);}};// Add leave\nconst addLeave=async e=>{e.preventDefault();const form=e.target;const employeeId=form.employee.value;const from=form.from.value;const to=form.to.value;const days=Math.floor((new Date(to)-new Date(from))/(1000*60*60*24))+1;try{await fetch(\"\".concat(API_URL,\"/api/add-leave\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:Date.now().toString(),employeeId,from,to,days})});form.reset();loadData();}catch(err){console.error(\"Add leave error:\",err);}};// Export to Excel\nconst doExport=()=>{window.open(\"\".concat(API_URL,\"/api/export?year=\").concat(year),\"_blank\");};useEffect(()=>{loadData();},[year]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/STIRIXIS.png\",alt:\"STIRIXIS Logo\",className:\"h-16 w-auto cursor-pointer\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-4 mb-6\",children:[/*#__PURE__*/_jsx(Link,{to:\"/add\",className:\"btn btn-blue\",children:\"\\u03A0\\u03C1\\u03BF\\u03C3\\u03B8\\u03AE\\u03BA\\u03B7 \\u039D\\u03AD\\u03BF\\u03C5 \\u0395\\u03C1\\u03B3\\u03B1\\u03B6\\u03BF\\u03BC\\u03AD\\u03BD\\u03BF\\u03C5\"}),/*#__PURE__*/_jsx(Link,{to:\"/edit\",className:\"btn btn-yellow\",children:\"\\u0395\\u03C0\\u03B5\\u03BE\\u03B5\\u03C1\\u03B3\\u03B1\\u03C3\\u03AF\\u03B1 \\u0395\\u03C1\\u03B3\\u03B1\\u03B6\\u03BF\\u03BC\\u03AD\\u03BD\\u03BF\\u03C5\"})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(EmployeeList,{employees:employees,leaves:leaves,year:year,setYear:setYear,addLeave:addLeave,loadData:loadData,doExport:doExport,handleEditLeave:handleEditLeave// ← pass it here\n,handleDeleteLeave:handleDeleteLeave// ← pass it here\n,API_URL:API_URL})}),/*#__PURE__*/_jsx(Route,{path:\"/add\",element:/*#__PURE__*/_jsx(AddEmployee,{loadData:loadData})}),/*#__PURE__*/_jsx(Route,{path:\"/edit\",element:/*#__PURE__*/_jsx(EditEmployee,{loadData:loadData})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Routes","Route","Link","EmployeeList","AddEmployee","EditEmployee","jsx","_jsx","jsxs","_jsxs","API_URL","App","employees","setEmployees","leaves","setLeaves","year","setYear","Date","getFullYear","loadData","res","fetch","concat","json","err","console","error","handleDeleteLeave","id","window","confirm","method","handleEditLeave","leave","from","prompt","to","days","Math","floor","headers","body","JSON","stringify","addLeave","e","preventDefault","form","target","employeeId","employee","value","now","toString","reset","doExport","open","className","children","src","alt","path","element"],"sources":["D:/projects/ΑΔΕΙΕΣ/server/client/src/App.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Routes, Route, Link } from \"react-router-dom\";\r\nimport EmployeeList from \"./EmployeeList\"; // dashboard page\r\nimport AddEmployee from \"./AddEmployee\";   // add employee form\r\nimport EditEmployee from \"./EditEmployee\";\r\n\r\nconst API_URL = \"http://0.0.0.0:7020\";\r\n\r\nexport default function App() {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [leaves, setLeaves] = useState([]);\r\n  const [year, setYear] = useState(new Date().getFullYear());\r\n\r\n  // Load employees and leaves for selected year\r\n  const loadData = async () => {\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/data?year=${year}`);\r\n      const json = await res.json();\r\n      setEmployees(json.employees || []);\r\n      setLeaves(json.leaves || []);\r\n    } catch (err) {\r\n      console.error(\"Load data error:\", err);\r\n    }\r\n  };\r\n// Delete leave\r\nconst handleDeleteLeave = async (id) => {\r\n  if (!window.confirm(\"Σίγουρα θέλεις να διαγράψεις αυτήν την άδεια;\")) return;\r\n  try {\r\n    await fetch(`${API_URL}/api/delete-leave/${id}`, { method: \"DELETE\" });\r\n    loadData();\r\n  } catch (err) {\r\n    console.error(\"Delete leave error:\", err);\r\n  }\r\n};\r\n\r\n// Edit leave (απλό prompt για τώρα, μπορείς να κάνεις modal αργότερα)\r\nconst handleEditLeave = async (leave) => {\r\n  const from = prompt(\"Νέα ημερομηνία έναρξης (YYYY-MM-DD):\", leave.from);\r\n  const to = prompt(\"Νέα ημερομηνία λήξης (YYYY-MM-DD):\", leave.to);\r\n  if (!from || !to) return;\r\n\r\n  const days =\r\n    Math.floor((new Date(to) - new Date(from)) / (1000 * 60 * 60 * 24)) + 1;\r\n\r\n  try {\r\n    await fetch(`${API_URL}/api/update-leave`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ id: leave.id, from, to, days }),\r\n    });\r\n    loadData();\r\n  } catch (err) {\r\n    console.error(\"Update leave error:\", err);\r\n  }\r\n};\r\n\r\n  // Add leave\r\n  const addLeave = async (e) => {\r\n    e.preventDefault();\r\n    const form = e.target;\r\n    const employeeId = form.employee.value;\r\n    const from = form.from.value;\r\n    const to = form.to.value;\r\n    const days =\r\n      Math.floor((new Date(to) - new Date(from)) / (1000 * 60 * 60 * 24)) + 1;\r\n\r\n    try {\r\n      await fetch(`${API_URL}/api/add-leave`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ id: Date.now().toString(), employeeId, from, to, days }),\r\n      });\r\n      form.reset();\r\n      loadData();\r\n    } catch (err) {\r\n      console.error(\"Add leave error:\", err);\r\n    }\r\n  };\r\n\r\n  // Export to Excel\r\n  const doExport = () => {\r\n    window.open(`${API_URL}/api/export?year=${year}`, \"_blank\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [year]);\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4\">\r\n      {/* Logo */}\r\n      <div className=\"flex justify-center mb-6\">\r\n        <Link to=\"/\">\r\n          <img\r\n            src=\"/STIRIXIS.png\"\r\n            alt=\"STIRIXIS Logo\"\r\n            className=\"h-16 w-auto cursor-pointer\"\r\n          />\r\n        </Link>\r\n      </div>\r\n\r\n    <div className=\"flex justify-center gap-4 mb-6\">\r\n  <Link to=\"/add\" className=\"btn btn-blue\">\r\n    Προσθήκη Νέου Εργαζομένου\r\n  </Link>\r\n  <Link to=\"/edit\" className=\"btn btn-yellow\">\r\n    Επεξεργασία Εργαζομένου\r\n  </Link>\r\n</div>\r\n\r\n\r\n      {/* Routes */}\r\n      <Routes>\r\n        <Route\r\n          path=\"/\"\r\n          element={\r\n            <EmployeeList\r\n  employees={employees}\r\n  leaves={leaves}\r\n  year={year}\r\n  setYear={setYear}\r\n  addLeave={addLeave}\r\n  loadData={loadData}\r\n  doExport={doExport}\r\n  handleEditLeave={handleEditLeave}     // ← pass it here\r\n  handleDeleteLeave={handleDeleteLeave} // ← pass it here\r\n  API_URL={API_URL} \r\n/>\r\n\r\n          }\r\n        />\r\n        <Route path=\"/add\" element={<AddEmployee loadData={loadData} />} />\r\n        <Route path=\"/edit\" element={<EditEmployee loadData={loadData} />} />\r\n      </Routes>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}