{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=\"http://0.0.0.0:7020\";export default function AddEmployee(_ref){let{loadData}=_ref;const[employees,setEmployees]=useState([]);const[loading,setLoading]=useState(false);// Fetch all employees (ignore year)\nconst fetchEmployees=async()=>{setLoading(true);try{const res=await fetch(\"\".concat(API_URL,\"/api/employees\"));const data=await res.json();setEmployees(data||[]);}catch(err){console.error(\"Error loading employees:\",err);setEmployees([]);}setLoading(false);};useEffect(()=>{fetchEmployees();},[]);// Delete employee with confirmation\nconst handleDelete=async(id,name)=>{if(!window.confirm(\"\\u0398\\u03AD\\u03BB\\u03B5\\u03C4\\u03B5 \\u03BD\\u03B1 \\u03B4\\u03B9\\u03B1\\u03B3\\u03C1\\u03B1\\u03C6\\u03B5\\u03AF \\u03BF \\u03B5\\u03C1\\u03B3\\u03B1\\u03B6\\u03CC\\u03BC\\u03B5\\u03BD\\u03BF\\u03C2 \\\"\".concat(name,\"\\\" ;\")))return;try{await fetch(\"\".concat(API_URL,\"/api/delete-employee/\").concat(id),{method:\"DELETE\"});await fetchEmployees();if(loadData)loadData();// refresh parent data if needed\n}catch(err){console.error(\"Delete employee error:\",err);alert(\"Σφάλμα κατά τη διαγραφή του εργαζόμενου!\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"\\u039B\\u03AF\\u03C3\\u03C4\\u03B1 \\u038C\\u03BB\\u03C9\\u03BD \\u03C4\\u03C9\\u03BD \\u0395\\u03C1\\u03B3\\u03B1\\u03B6\\u03BF\\u03BC\\u03AD\\u03BD\\u03C9\\u03BD\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"\\u03A6\\u03CC\\u03C1\\u03C4\\u03C9\\u03C3\\u03B7...\"}):employees.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u0394\\u03B5\\u03BD \\u03C5\\u03C0\\u03AC\\u03C1\\u03C7\\u03BF\\u03C5\\u03BD \\u03B5\\u03C1\\u03B3\\u03B1\\u03B6\\u03CC\\u03BC\\u03B5\\u03BD\\u03BF\\u03B9.\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto border-collapse border w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"border p-2\",children:\"\\u038C\\u03BD\\u03BF\\u03BC\\u03B1\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border p-2\",children:\"\\u0395\\u03BD\\u03AD\\u03C1\\u03B3\\u03B5\\u03B9\\u03B5\\u03C2\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:employees.map(emp=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border p-2\",children:emp.name}),/*#__PURE__*/_jsx(\"td\",{className:\"border p-2 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(emp.id,emp.name),className:\"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600\",children:\"\\u274C\"})})]},emp.id))})]})]});}","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","API_URL","AddEmployee","_ref","loadData","employees","setEmployees","loading","setLoading","fetchEmployees","res","fetch","concat","data","json","err","console","error","handleDelete","id","name","window","confirm","method","alert","className","children","length","map","emp","onClick"],"sources":["D:/projects/ΑΔΕΙΕΣ/server/client/src/AddEmployee.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst API_URL = \"http://0.0.0.0:7020\";\r\n\r\nexport default function AddEmployee({ loadData }) {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Fetch all employees (ignore year)\r\n  const fetchEmployees = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/employees`);\r\n      const data = await res.json();\r\n      setEmployees(data || []);\r\n    } catch (err) {\r\n      console.error(\"Error loading employees:\", err);\r\n      setEmployees([]);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEmployees();\r\n  }, []);\r\n\r\n  // Delete employee with confirmation\r\n  const handleDelete = async (id, name) => {\r\n    if (!window.confirm(`Θέλετε να διαγραφεί ο εργαζόμενος \"${name}\" ;`)) return;\r\n\r\n    try {\r\n      await fetch(`${API_URL}/api/delete-employee/${id}`, { method: \"DELETE\" });\r\n      await fetchEmployees();\r\n      if (loadData) loadData(); // refresh parent data if needed\r\n    } catch (err) {\r\n      console.error(\"Delete employee error:\", err);\r\n      alert(\"Σφάλμα κατά τη διαγραφή του εργαζόμενου!\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4\">\r\n      <h2 className=\"text-xl font-bold mb-4\">Λίστα Όλων των Εργαζομένων</h2>\r\n\r\n      {loading ? (\r\n        <p>Φόρτωση...</p>\r\n      ) : employees.length === 0 ? (\r\n        <p>Δεν υπάρχουν εργαζόμενοι.</p>\r\n      ) : (\r\n        <table className=\"table-auto border-collapse border w-full\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"border p-2\">Όνομα</th>\r\n              <th className=\"border p-2\">Ενέργειες</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {employees.map((emp) => (\r\n              <tr key={emp.id}>\r\n                <td className=\"border p-2\">{emp.name}</td>\r\n                <td className=\"border p-2 text-center\">\r\n                  <button\r\n                    onClick={() => handleDelete(emp.id, emp.name)}\r\n                    className=\"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600\"\r\n                  >\r\n                    ❌\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}